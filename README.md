# testovoe_server

  Документация к эндпоинтам

Получение профиля пользователя
Запрос
GET /api/users/profile

Запрос для получения профиля пользователя.

Заголовки
makefile
Copy code
Authorization: Bearer <token>
Параметры
Нет.

Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "userProfile": {
    "_id": "Идентификатор пользователя",
    "name": "Имя пользователя",
    "email": "Email пользователя",
    "images": {
      "before": "Ссылка на изображение до",
      "after": "Ссылка на изображение после"
    },
    "createdAt": "Дата создания профиля",
    "updatedAt": "Дата обновления профиля"
  }
}
Ошибки
Статус: 401 Unauthorized
Описание: Пользователь не авторизован.
Регистрация пользователя
Запрос
POST /api/users/

Запрос для регистрации нового пользователя.

Заголовки
Нет.

Параметры
name (обязательный): Имя пользователя.
email (обязательный): Email пользователя.
password (обязательный): Пароль пользователя.
json
Copy code
{
  "name": "Имя пользователя",
  "email": "Email пользователя",
  "password": "Пароль пользователя"
}
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "user": {
    "_id": "Идентификатор пользователя",
    "name": "Имя пользователя",
    "email": "Email пользователя",
    "createdAt": "Дата создания профиля",
    "updatedAt": "Дата обновления профиля"
  },
  "token": "JWT токен авторизации"
}
Ошибки
Статус: 400 Bad Request
Описание: Ошибка валидации данных пользователя.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при регистрации пользователя.
Аутентификация пользователя
Запрос
POST /api/users/login

Запрос для аутентификации пользователя.

Заголовки
Нет.

Параметры
email (обязательный): Email пользователя.
password (обязательный): Пароль пользователя.
json
Copy code
{
  "email": "Email пользователя",
  "password": "Пароль пользователя"
}
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "user": {
    "_id": "Идентификатор пользователя",
    "name": "Имя пользователя",
    "email": "Email пользователя",
    "createdAt": "Дата создания профиля",
    "updatedAt": "Дата обновления профиля"
  },
  "token": "JWT токен авторизации"
}
Ошибки
Статус: 401 Unauthorized
Описание: Неверные учетные данные пользователя.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при аутентификации пользователя.


Создание поста
Запрос
POST /api/posts/posts

Запрос для создания нового поста.

Заголовки
makefile
Copy code
Authorization: Bearer <token>
Параметры
message (обязательный): Текст сообщения поста.
media (опциональный): Ссылка на медиафайл.
json
Copy code
{
  "message": "Текст сообщения",
  "media": "Ссылка на медиафайл"
}
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "_id": "Идентификатор поста",
  "user": "Идентификатор пользователя",
  "message": "Текст сообщения",
  "media": "Ссылка на медиафайл",
  "createdAt": "Дата создания поста",
  "updatedAt": "Дата обновления поста"
}
Ошибки
Статус: 401 Unauthorized
Описание: Пользователь не авторизован.
Статус: 400 Bad Request
Описание: Ошибка валидации данных при создании поста.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при создании поста.
Обновление поста
Запрос
PUT /api/posts/posts

Запрос для обновления существующего поста.

Заголовки
makefile
Copy code
Authorization: Bearer <token>
Параметры
postId (обязательный): Идентификатор поста.
message (опциональный): Новый текст сообщения поста.
media (опциональный): Новая ссылка на медиафайл.
json
Copy code
{
  "postId": "Идентификатор поста",
  "message": "Новый текст сообщения",
  "media": "Новая ссылка на медиафайл"
}
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "_id": "Идентификатор поста",
  "user": "Идентификатор пользователя",
  "message": "Текст сообщения",
  "media": "Ссылка на медиафайл",
  "createdAt": "Дата создания поста",
  "updatedAt": "Дата обновления поста"
}
Ошибки
Статус: 401 Unauthorized
Описание: Пользователь не авторизован.
Статус: 404 Not Found
Описание: Пост не найден.
Статус: 400 Bad Request
Описание: Ошибка валидации данных при обновлении поста.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при обновлении поста.
Удаление поста
Запрос
DELETE /api/posts/posts

Запрос для удаления существующего поста.

Заголовки
makefile
Copy code
Authorization: Bearer <token>
Параметры
postId (обязательный): Идентификатор поста.
json
Copy code
{
  "postId": "Идентификатор поста"
}
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "_id": "Идентификатор удаленного поста",
  "user": "Идентификатор пользователя",
  "message": "Текст сообщения",
  "media": "Ссылка на медиафайл",
  "createdAt": "Дата создания поста",
  "updatedAt": "Дата обновления поста"
}
Ошибки
Статус: 401 Unauthorized
Описание: Пользователь не авторизован.
Статус: 404 Not Found
Описание: Пост не найден.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при удалении поста.
Получение списка постов
Запрос
GET /api/posts/posts

Запрос для получения списка постов.

Параметры запроса
page (опциональный): Номер страницы (по умолчанию: 1).
pageSize (опциональный): Количество постов на странице (по умолчанию: 20).
bash
Copy code
GET /api/posts/posts?page=1&pageSize=20
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "page": 1,
  "pageSize": 20,
  "totalPosts": "Общее количество постов",
  "totalPages": "Общее количество страниц",
  "posts": [
    {
      "_id": "Идентификатор поста",
      "user": {
        "_id": "Идентификатор пользователя",
        "name": "Имя пользователя",
        "email": "Email пользователя",
        "images": {
          "before": "Ссылка на изображение до",
          "after": "Ссылка на изображение после"
        },
        "createdAt": "Дата создания пользователя",
        "updatedAt": "Дата обновления пользователя"
      },
      "message": "Текст сообщения",
      "media": "Ссылка на медиафайл",
      "createdAt": "Дата создания поста",
      "updatedAt": "Дата обновления поста"
    },
    ...
  ]
}
Ошибки
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при получении списка постов.
Загрузка файла
Запрос
POST /api/uploads

Запрос для загрузки файла.

Заголовки
makefile
Copy code
Authorization: Bearer <token>
Параметры
file (обязательный): Файл для загрузки.
Ответ
makefile
Copy code
Статус: 200 OK
json
Copy code
{
  "url": "Ссылка на загруженный файл"
}
Ошибки
Статус: 401 Unauthorized
Описание: Пользователь не авторизован.
Статус: 400 Bad Request
Описание: Нет файла для загрузки.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при загрузке файла.
Получение загруженного файла
Запрос
GET /api/uploads/:filename

Запрос для получения загруженного файла по его имени.

Ответ
makefile
Copy code
Статус: 200 OK
Отправляется файл с типом MIME соответствующим типу загруженного файла.

Ошибки
Статус: 404 Not Found
Описание: Загруженный файл не найден.
Статус: 500 Internal Server Error
Описание: Внутренняя ошибка сервера при получении загруженного файла.



